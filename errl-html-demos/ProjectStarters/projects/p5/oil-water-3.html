<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>An interactive overhead projector where you drop oil and water in different colors and then it shines on the wall - P5.js Sketch</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0a0a0a;
      color: #fff;
    }
    .container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .header {
      padding: 1.5rem 2rem;
      background: #1a1a1a;
      border-bottom: 1px solid #333;
    }
    .header h1 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    .header p {
      color: #b0b0b0;
      font-size: 0.875rem;
    }
    .back-link {
      display: inline-block;
      margin-bottom: 1rem;
      color: #6366f1;
      text-decoration: none;
      font-size: 0.875rem;
    }
    .back-link:hover {
      text-decoration: underline;
    }
    #p5-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background: #0a0a0a;
    }
    .info {
      padding: 1.5rem 2rem;
      background: #1a1a1a;
      border-top: 1px solid #333;
      font-size: 0.875rem;
    }
    .info-item {
      margin-bottom: 0.5rem;
      display: flex;
    }
    .info-label {
      width: 120px;
      color: #b0b0b0;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <a href="../index.html" class="back-link">‚Üê Back to Gallery</a>
      <h1>An interactive overhead projector where you drop oil and water in different colors and then it shines on the wall</h1>
      <p>P5.js Interactive Sketch</p>
    </div>
    <div id="p5-container"></div>
    <div class="info">
      <div class="info-item">
        <span class="info-label">Prompt:</span>
        <span>An interactive overhead projector where you drop oil and water in different colors and then it shines on the wall</span>
      </div>
      <div class="info-item">
        <span class="info-label">Model:</span>
        <span>threePro</span>
      </div>
      <div class="info-item">
        <span class="info-label">Generation Time:</span>
        <span>53.3s</span>
      </div>
    </div>
  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script>
    const container = document.getElementById('p5-container');
    const sketchCode = "let drops = [];\nlet textureGraphics;\nlet selectedType = 'oil'; // 'oil' or 'water'\n\nfunction setup() {\n  createCanvas(800, 600);\n  colorMode(HSB, 360, 100, 100, 100);\n  \n  // Create a static texture for the Fresnel lens look/dust\n  textureGraphics = createGraphics(width, height);\n  textureGraphics.noFill();\n  textureGraphics.stroke(255, 5);\n  textureGraphics.strokeWeight(2);\n  let cx = width / 2;\n  let cy = height / 2;\n  for (let r = 0; r < 500; r += 15) {\n    textureGraphics.circle(cx, cy, r * 2);\n  }\n  \n  // Add some random dust\n  for(let i=0; i<200; i++){\n    textureGraphics.stroke(0, 10);\n    textureGraphics.strokeWeight(random(1,3));\n    textureGraphics.point(random(width), random(height));\n  }\n\n  // Instructions\n  noStroke();\n}\n\nfunction draw() {\n  background(10); // Dark room wall\n\n  // Draw the projector light square\n  push();\n  fill(240, 235, 255); // Bright white light\n  rectMode(CENTER);\n  // Soft glow behind the projection\n  drawingContext.shadowBlur = 50;\n  drawingContext.shadowColor = color(255);\n  rect(width/2, height/2, 700, 500, 20);\n  drawingContext.shadowBlur = 0; \n  pop();\n\n  // Draw the Fresnel lens texture\n  image(textureGraphics, 0, 0);\n\n  // Update and Draw Fluids\n  // We use a blur filter to make circles look like liquid merging\n  push();\n  \n  // This creates the gooey effect\n  drawingContext.filter = 'blur(12px) contrast(1.5)'; \n  \n  for (let i = drops.length - 1; i >= 0; i--) {\n    let d = drops[i];\n    d.update();\n    d.display();\n    d.checkBounds();\n    \n    // Interaction with other drops\n    for (let j = i - 1; j >= 0; j--) {\n      let other = drops[j];\n      d.collide(other);\n    }\n  }\n  pop();\n\n  // Draw Vignette / Projector Arm Shadow\n  drawVignette();\n  \n  // Interaction Logic\n  if (mouseIsPressed) {\n    if(frameCount % 5 === 0) {\n      addDrop(mouseX, mouseY);\n    }\n  }\n\n  // UI Instructions\n  drawUI();\n}\n\nfunction addDrop(x, y) {\n  // Ensure drops stay within the light area approx\n  if (x > 80 && x < 720 && y > 80 && y < 520) {\n    let type = selectedType;\n    // Auto-toggle or random variation for fun if user doesn't select\n    if(keyIsPressed === false && mouseIsPressed) {\n       // If just clicking, vary size and color slightly\n    }\n    \n    let radius = random(15, 40);\n    let col;\n    \n    if (type === 'oil') {\n      // Oil colors: Yellows, Oranges, Reds, dense\n      col = color(random(0, 60), 90, 90, 80); \n    } else {\n      // Water/Dye colors: Blues, Cyans, Purples, translucent\n      col = color(random(160, 280), 80, 90, 60);\n    }\n    \n    drops.push(new Drop(x, y, radius, col, type));\n  }\n  \n  // Cap number of particles for performance\n  if(drops.length > 150) {\n    drops.shift();\n  }\n}\n\nfunction keyPressed() {\n  if (key === '1' || key === 'o') selectedType = 'oil';\n  if (key === '2' || key === 'w') selectedType = 'water';\n  if (key === 'c') drops = []; // Clear\n}\n\nclass Drop {\n  constructor(x, y, r, col, type) {\n    this.pos = createVector(x, y);\n    this.vel = p5.Vector.random2D().mult(0.5);\n    this.r = 0; // animate in\n    this.targetR = r;\n    this.col = col;\n    this.type = type;\n  }\n\n  update() {\n    // Grow animation\n    if (this.r < this.targetR) {\n      this.r = lerp(this.r, this.targetR, 0.1);\n    }\n\n    this.pos.add(this.vel);\n    \n    // Heat convection / slight drift\n    this.vel.add(p5.Vector.random2D().mult(0.02));\n    \n    // Friction\n    this.vel.mult(0.98);\n  }\n\n  display() {\n    noStroke();\n    fill(this.col);\n    // If it's oil, it might have a \"rim\" or be denser. \n    // If water, it mixes more.\n    circle(this.pos.x, this.pos.y, this.r * 2);\n    \n    // Add a highlight to make it look wet (only visible because of blur context)\n    fill(255, 30);\n    circle(this.pos.x - this.r*0.3, this.pos.y - this.r*0.3, this.r * 0.5);\n  }\n\n  checkBounds() {\n    // Stay inside the \"glass\"\n    let margin = 60;\n    if (this.pos.x < margin) { this.pos.x = margin; this.vel.x *= -1; }\n    if (this.pos.x > width - margin) { this.pos.x = width - margin; this.vel.x *= -1; }\n    if (this.pos.y < margin) { this.pos.y = margin; this.vel.y *= -1; }\n    if (this.pos.y > height - margin) { this.pos.y = height - margin; this.vel.y *= -1; }\n  }\n\n  collide(other) {\n    let d = dist(this.pos.x, this.pos.y, other.pos.x, other.pos.y);\n    let minDist = this.r + other.r;\n\n    if (d < minDist) {\n      // Calculate repulsion force\n      let angle = atan2(other.pos.y - this.pos.y, other.pos.x - this.pos.x);\n      let force = 0.05; // Soft force\n      \n      // Oil and Water repel strongly\n      if (this.type !== other.type) {\n        force = 0.2; \n        // Also insure they don't overlap visually as much (immiscible)\n        let overlap = minDist - d;\n        if (overlap > 0) {\n          let adjust = overlap * 0.05;\n          let dir = p5.Vector.sub(other.pos, this.pos).normalize();\n          other.pos.add(dir.mult(adjust));\n          this.pos.sub(dir.mult(adjust));\n        }\n      } \n      \n      let targetX = cos(angle) * force;\n      let targetY = sin(angle) * force;\n\n      this.vel.x -= targetX;\n      this.vel.y -= targetY;\n      other.vel.x += targetX;\n      other.vel.y += targetY;\n    }\n  }\n}\n\nfunction drawVignette() {\n  // Heavy vignette to simulate the dark room and lens falloff\n  beginShape();\n  fill(0, 0, 0, 0);\n  vertex(0,0);\n  vertex(width, 0);\n  vertex(width, height);\n  vertex(0, height);\n  \n  // Cutout\n  beginContour();\n  vertex(50, 50);\n  vertex(50, height-50);\n  vertex(width-50, height-50);\n  vertex(width-50, 50);\n  endContour();\n  endShape(CLOSE);\n  \n  // Soft edges using gradient fake (multiple strokes)\n  noFill();\n  for(let i=0; i<60; i++){\n    stroke(0, map(i, 0, 60, 255, 0));\n    strokeWeight(1);\n    rectMode(CENTER);\n    rect(width/2, height/2, 700 + i, 500 + i, 20 + i/2);\n  }\n  \n  // Projector arm shadow\n  fill(10, 220);\n  noStroke();\n  rect(width - 40, height/2, 80, height);\n}\n\nfunction drawUI() {\n  push();\n  fill(50);\n  textAlign(LEFT, BOTTOM);\n  textSize(14);\n  text(\"OVERHEAD PROJECTOR SIMULATOR\", 60, height - 60);\n  \n  fill(80);\n  textSize(12);\n  text(\"Drag Mouse to drop fluid.\", 60, height - 40);\n  text(\"Keys: [1] Oil (Warm) | [2] Water (Cool) | [C] Clear\", 60, height - 25);\n  \n  // Current selection indicator\n  textAlign(RIGHT, BOTTOM);\n  fill(selectedType === 'oil' ? color(30, 100, 80) : color(200, 100, 80));\n  text(\"Current Dropper: \" + selectedType.toUpperCase(), width - 70, height - 30);\n  pop();\n}";
    
    const sketch = function(p) {
      let drops = [];
let textureGraphics;
let selectedType = 'oil'; // 'oil' or 'water'

function setup() {
  createCanvas(800, 600);
  colorMode(HSB, 360, 100, 100, 100);
  
  // Create a static texture for the Fresnel lens look/dust
  textureGraphics = createGraphics(width, height);
  textureGraphics.noFill();
  textureGraphics.stroke(255, 5);
  textureGraphics.strokeWeight(2);
  let cx = width / 2;
  let cy = height / 2;
  for (let r = 0; r < 500; r += 15) {
    textureGraphics.circle(cx, cy, r * 2);
  }
  
  // Add some random dust
  for(let i=0; i<200; i++){
    textureGraphics.stroke(0, 10);
    textureGraphics.strokeWeight(random(1,3));
    textureGraphics.point(random(width), random(height));
  }

  // Instructions
  noStroke();
}

function draw() {
  background(10); // Dark room wall

  // Draw the projector light square
  push();
  fill(240, 235, 255); // Bright white light
  rectMode(CENTER);
  // Soft glow behind the projection
  drawingContext.shadowBlur = 50;
  drawingContext.shadowColor = color(255);
  rect(width/2, height/2, 700, 500, 20);
  drawingContext.shadowBlur = 0; 
  pop();

  // Draw the Fresnel lens texture
  image(textureGraphics, 0, 0);

  // Update and Draw Fluids
  // We use a blur filter to make circles look like liquid merging
  push();
  
  // This creates the gooey effect
  drawingContext.filter = 'blur(12px) contrast(1.5)'; 
  
  for (let i = drops.length - 1; i >= 0; i--) {
    let d = drops[i];
    d.update();
    d.display();
    d.checkBounds();
    
    // Interaction with other drops
    for (let j = i - 1; j >= 0; j--) {
      let other = drops[j];
      d.collide(other);
    }
  }
  pop();

  // Draw Vignette / Projector Arm Shadow
  drawVignette();
  
  // Interaction Logic
  if (mouseIsPressed) {
    if(frameCount % 5 === 0) {
      addDrop(mouseX, mouseY);
    }
  }

  // UI Instructions
  drawUI();
}

function addDrop(x, y) {
  // Ensure drops stay within the light area approx
  if (x > 80 && x < 720 && y > 80 && y < 520) {
    let type = selectedType;
    // Auto-toggle or random variation for fun if user doesn't select
    if(keyIsPressed === false && mouseIsPressed) {
       // If just clicking, vary size and color slightly
    }
    
    let radius = random(15, 40);
    let col;
    
    if (type === 'oil') {
      // Oil colors: Yellows, Oranges, Reds, dense
      col = color(random(0, 60), 90, 90, 80); 
    } else {
      // Water/Dye colors: Blues, Cyans, Purples, translucent
      col = color(random(160, 280), 80, 90, 60);
    }
    
    drops.push(new Drop(x, y, radius, col, type));
  }
  
  // Cap number of particles for performance
  if(drops.length > 150) {
    drops.shift();
  }
}

function keyPressed() {
  if (key === '1' || key === 'o') selectedType = 'oil';
  if (key === '2' || key === 'w') selectedType = 'water';
  if (key === 'c') drops = []; // Clear
}

class Drop {
  constructor(x, y, r, col, type) {
    this.pos = createVector(x, y);
    this.vel = p5.Vector.random2D().mult(0.5);
    this.r = 0; // animate in
    this.targetR = r;
    this.col = col;
    this.type = type;
  }

  update() {
    // Grow animation
    if (this.r < this.targetR) {
      this.r = lerp(this.r, this.targetR, 0.1);
    }

    this.pos.add(this.vel);
    
    // Heat convection / slight drift
    this.vel.add(p5.Vector.random2D().mult(0.02));
    
    // Friction
    this.vel.mult(0.98);
  }

  display() {
    noStroke();
    fill(this.col);
    // If it's oil, it might have a "rim" or be denser. 
    // If water, it mixes more.
    circle(this.pos.x, this.pos.y, this.r * 2);
    
    // Add a highlight to make it look wet (only visible because of blur context)
    fill(255, 30);
    circle(this.pos.x - this.r*0.3, this.pos.y - this.r*0.3, this.r * 0.5);
  }

  checkBounds() {
    // Stay inside the "glass"
    let margin = 60;
    if (this.pos.x < margin) { this.pos.x = margin; this.vel.x *= -1; }
    if (this.pos.x > width - margin) { this.pos.x = width - margin; this.vel.x *= -1; }
    if (this.pos.y < margin) { this.pos.y = margin; this.vel.y *= -1; }
    if (this.pos.y > height - margin) { this.pos.y = height - margin; this.vel.y *= -1; }
  }

  collide(other) {
    let d = dist(this.pos.x, this.pos.y, other.pos.x, other.pos.y);
    let minDist = this.r + other.r;

    if (d < minDist) {
      // Calculate repulsion force
      let angle = atan2(other.pos.y - this.pos.y, other.pos.x - this.pos.x);
      let force = 0.05; // Soft force
      
      // Oil and Water repel strongly
      if (this.type !== other.type) {
        force = 0.2; 
        // Also insure they don't overlap visually as much (immiscible)
        let overlap = minDist - d;
        if (overlap > 0) {
          let adjust = overlap * 0.05;
          let dir = p5.Vector.sub(other.pos, this.pos).normalize();
          other.pos.add(dir.mult(adjust));
          this.pos.sub(dir.mult(adjust));
        }
      } 
      
      let targetX = cos(angle) * force;
      let targetY = sin(angle) * force;

      this.vel.x -= targetX;
      this.vel.y -= targetY;
      other.vel.x += targetX;
      other.vel.y += targetY;
    }
  }
}

function drawVignette() {
  // Heavy vignette to simulate the dark room and lens falloff
  beginShape();
  fill(0, 0, 0, 0);
  vertex(0,0);
  vertex(width, 0);
  vertex(width, height);
  vertex(0, height);
  
  // Cutout
  beginContour();
  vertex(50, 50);
  vertex(50, height-50);
  vertex(width-50, height-50);
  vertex(width-50, 50);
  endContour();
  endShape(CLOSE);
  
  // Soft edges using gradient fake (multiple strokes)
  noFill();
  for(let i=0; i<60; i++){
    stroke(0, map(i, 0, 60, 255, 0));
    strokeWeight(1);
    rectMode(CENTER);
    rect(width/2, height/2, 700 + i, 500 + i, 20 + i/2);
  }
  
  // Projector arm shadow
  fill(10, 220);
  noStroke();
  rect(width - 40, height/2, 80, height);
}

function drawUI() {
  push();
  fill(50);
  textAlign(LEFT, BOTTOM);
  textSize(14);
  text("OVERHEAD PROJECTOR SIMULATOR", 60, height - 60);
  
  fill(80);
  textSize(12);
  text("Drag Mouse to drop fluid.", 60, height - 40);
  text("Keys: [1] Oil (Warm) | [2] Water (Cool) | [C] Clear", 60, height - 25);
  
  // Current selection indicator
  textAlign(RIGHT, BOTTOM);
  fill(selectedType === 'oil' ? color(30, 100, 80) : color(200, 100, 80));
  text("Current Dropper: " + selectedType.toUpperCase(), width - 70, height - 30);
  pop();
}
    };
    
    new p5(sketch, container);
  </script>
</body>
</html>